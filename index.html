<html>
    <head>
        <title>Pacman Demo</title>
        <style type="text/css">

            *{
                background-color: black;
                margin: 0px;
                padding: 0px;
            }
            
            div.row div{
                display: inline-block;
                width: 20px;
                height:20px;
            }

            div.cherries{
                background-color: black;
                background: url('img/cherries.gif');
                background-size: cover;
                background-repeat: no-repeat;
                background-position: center;
            }

            div.brick{
                background-color: blue;
                
            }

            div.coin{
                background-color: black;
                background: url('img/pill.gif');
                background-size: cover;
                background-repeat: no-repeat;
                background-position: center;
                
            }

            div#pacman{
                background-size: cover;
                background-repeat: no-repeat;
                background-position: center;
                width: 20px;
                height: 20px;
                position: absolute;
            }
            
            div#score{
                border:1px solid white;
                width: 30px;
                height: 20px;
                color: white;
                padding: 7px;
                text-align: center;
                position: absolute;
                top:0px;
                left:380px;
            }

        </style>        
    </head>
    <body>

        <!-- DIVS -->
        <div id="container">
            <div id="world"></div>
            <div id="pacman"></div>
            <div id="score">0</div>
        </div>
        
        <!-- List of Features to build -->
        <!-- 4) Directional Pacman -->
        <!-- 5) (OPTIONAL) Ghost appear + lives -->
        <!-- 6) (OPTIONAL) rng movement ghost -->
        <!-- 7) (OPTIONAL) MP -->
        
        <script>

            // VARIABLES

            var world = [
                [2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],
                [2,1,1,1,1,1,1,1,1,2,1,1,1,1,1,1,1,1,2],
                [2,1,2,2,1,2,2,2,1,2,1,2,2,2,1,2,2,1,2],
                [2,1,2,2,1,2,2,2,1,2,1,2,2,2,1,2,2,1,2],
                [2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2],
                [2,1,2,2,1,2,1,2,2,2,2,2,1,2,1,2,2,1,2],
                [2,1,1,1,1,2,1,1,1,1,1,1,1,2,1,1,1,1,2],
                [2,2,2,2,1,2,1,2,2,0,2,2,1,2,1,2,2,2,2],
                [2,2,2,2,1,2,1,2,0,0,0,2,1,2,1,2,2,2,2],
                [2,1,1,1,1,1,1,2,0,0,0,2,1,1,1,1,1,1,2],
                [2,2,2,2,1,2,1,2,2,2,2,2,1,2,1,2,2,2,2],
                [2,2,2,2,1,2,1,1,1,1,1,1,1,2,1,2,2,2,2],
                [2,1,1,1,1,1,1,2,2,2,2,2,1,1,1,1,1,1,2],
                [2,1,2,2,1,2,1,1,1,1,1,1,1,2,1,2,2,1,2],
                [2,1,2,2,1,2,1,2,2,2,2,2,1,2,1,2,2,1,2],
                [2,1,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,1,2],
                [2,1,2,2,2,2,2,2,1,2,1,2,2,2,2,2,2,1,2],
                [2,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,3,2],
                [2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],
            ];

            var score=0;

            var direction = "left";

            var pacman = {
                x: 9,
                y: 17
            };

            // FUNCTIONS
            function displayWorld(){
                var output = '';
                for(var i=0; i<world.length; i++){
                    output+= "\n<div class='row'>\n";
                    // console.log(output);
                    for(var j=0; j<world[i].length; j++){
                        if(world[i][j] ==3)
                            output += "<div class='cherries'></div>";
                            // console.log(output);
                        if(world[i][j] ==2)
                            output += "<div class='brick'></div>";
                            // console.log(output);
                        if(world[i][j] ==1)
                            output += "<div class='coin'></div>";
                            // console.log(output);
                        if(world[i][j] ==0)
                            output += "<div class='empty'></div>";
                        // console.log(output);
                    }
                    output += "</div>";        
                }
                // console.log(output);
                document.getElementById("world").innerHTML = output;
            }

            function displayPacman(){
                document.getElementById('pacman').style.top = pacman.y*20+"px";
                document.getElementById('pacman').style.left = pacman.x*20+"px";
                document.getElementById("pacman").style.backgroundImage = "url('img/pacman-"+direction+".gif')";
                console.log("img/pacman_"+direction+".gif")
            }

            function displayScore(){
                document.getElementById('score').innerHTML = score;
            }

            // INITIALIZATION
            displayWorld();
            displayScore();
            displayPacman();
            
            // RAN ON KEYDOWN
            document.onkeydown = function(e){
                if(e.keyCode == 37 && world[pacman.y][pacman.x-1] != 2){  //left
                    direction = "left";
                    pacman.x--;
                }
                else if(e.keyCode == 39 && world[pacman.y][pacman.x+1] != 2){  //right
                    direction = "right";
                    pacman.x++;
                }
                else if(e.keyCode == 38 && world[pacman.y-1][pacman.x] != 2){ //up
                    direction = "up";
                    pacman.y--;
                }
                else if(e.keyCode == 40 && world[pacman.y+1][pacman.x] != 2){ //down
                    direction = "down";
                    pacman.y++;
                }
                
                if(world[pacman.y][pacman.x]==1){
                    world[pacman.y][pacman.x]=0;
                    score+=10;
                    displayWorld();
                    displayScore();
                }
                displayPacman();
            }

        </script>
    </body>
</html>